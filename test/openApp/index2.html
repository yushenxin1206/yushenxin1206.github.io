<!--点击网页唤起应用-->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
<title></title>
<style type="text/css">
	p{
		margin: 50px;
		font-size: 16px;
		color: rgba(0,0,0,.54);
		text-align: center;
		pointer-events: none;
	}
	.open-app{
		color: rgba(0,0,0,.87);
		pointer-events: auto;
	}
</style>
</head>
<body id="body">
<p class="open-app">点击打开玩机技巧</p>
<script src="../vConsole-3.2.0/dist/vconsole.min.js"></script>
<script src="./libs/jquery.min.js"></script>
<script type="text/javascript">

//初始化vConsole
//var vConsole = new VConsole(); 

//deep links和应用市场地址
var appURL="alipayqr://platformapi/startapp";
//var appURL="emuitips://www.huawei.com/hwemuimanual";
//var appURL="emuitips://www.huawei.com/hwemuimanual";
var downloadURL="http://a.vmall.com/uowap/index.html#/detailApp/C5373";

//判断设备属于哪类平台
var u = navigator.userAgent,//UserAgent字段之所以那么混乱，是因为其认为自己可以很好的渲染专门为其他浏览器编写的网页代码，因此主动添加其它浏览器的标识名称，使其能在自己的平台上运行
app = navigator.appVersion;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端

//IOS提示不能使用玩机技巧
if(isIOS){  
	$("p").eq(0).html("抱歉，IOS平台无法使用玩机技巧"); 
	$("p").eq(0).removeClass('open-app');	
}

//安卓平台
if(isAndroid){ 
	
	//判断是否为QQ或微信，不是则打开应用，否则提示在浏览器中打开
	var ua = navigator.userAgent.toLowerCase();
	var isQQWexin = ua.match(/MicroMessenger\/[0-9]/i) || ua.match(/QQ\/[0-9]/i);
	
	if(isQQWexin === null){ 
		
		//为标签绑定事件
		$("p").eq(0).click(openApp);
		
	}else{
	
		//在QQ微信中提示点击右上角在浏览器中打开
		$("p").eq(0).html("检测到当前非浏览器环境，请点击右上角在浏览器中打开"); 
		$("p").eq(0).removeClass('open-app');
		
	}
	
}



//打开玩机技巧
function openApp(){

	$("p").eq(0).html("正在打开玩机技巧..."); 
	$("p").eq(0).removeClass('open-app');
	
	//通过iframe打开app
	var ifr = document.createElement('iframe');
        ifr.src = appURL;//打开app的协议，有app同事提供
        ifr.style.display = 'none';

		//绑定onload和onerror
		ifr.onload = function(){ 
				alert("load"); 
			}; 
		ifr.onerror = function(){ 
				alert("error"); 
			}; 
		
		document.body.appendChild(ifr);
		
	/*window.setTimeout(function(){
	   document.body.removeChild(ifr);
　　　　　window.location.href = downloadURL;//打开app下载地址，有app同事提供
	},2000)
	
	//打开应用
	window.location.href = appURL;
	
	//延时1000ms则进入下载页
	setTimeout(function(){
	
		window.location.href = downloadURL;
		
	},1000);*/
	
}

</script>
</body>
</html>