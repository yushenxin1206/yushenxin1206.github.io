<!--点击网页唤起应用-->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
<title></title>
<style type="text/css">
	p{
		margin: 50px;
		font-size: 16px;
		color: rgba(0,0,0,.54);
		text-align: center;
		pointer-events: none;
	}
	.open-app{
		color: rgba(0,0,0,.87);
		pointer-events: auto;
	}
</style>
</head>
<body id="body">
<p class="open-app">点击打开玩机技巧</p>
<script src="../vConsole-3.2.0/dist/vconsole.min.js"></script>
<script src="./libs/jquery.min.js"></script>
<script type="text/javascript">

//初始化vConsole
var vConsole = new VConsole(); 

//deep links和应用市场地址
var appURL="alipayqr://platformapi/startapp";
//var appURL="emuitips://www.huawei.com/hwemuimanual";
var downloadURL="http://a.vmall.com/uowap/index.html#/detailApp/C5373";

//判断设备属于哪类平台
var u = navigator.userAgent,
app = navigator.appVersion;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端

//IOS提示不能使用玩机技巧
if(isIOS){  
	$("p").eq(0).html("抱歉，IOS平台无法使用玩机技巧"); 
	$("p").eq(0).removeClass('open-app');	
}

//安卓平台
if(isAndroid){ 
	
	//为标签绑定事件
	$("p").eq(0).click(openApp);
	
}



//打开玩机技巧
function openApp(){

	document.getElementsByTagName("p")[0].innerHTML="正在打开玩机技巧..."; 
	$("p").eq(0).removeClass('open-app');
	
	//打开应用
	window.location.href = appURL;
	
	//超时500ms则进入下载页
	setTimeout(function(){
		window.location.href = downloadURL;
	},500);
	
}

//app下载
function getApp(){
	//通过ajax请求，若返回200则链接有效，否则无效
	$.ajax({ 
		url: downloadURL, 
		type: 'GET', 
		complete: function(response) { 
			if(response.status != 200){ 
			
				//提示输入玩机技巧进行搜索，并跳转到应用市场
				$("p").eq(0).html("请在应用市场内搜索“玩机技巧”下载应用"); 
				
			} 
		} 
	}); 
}

</script>
</body>
</html>